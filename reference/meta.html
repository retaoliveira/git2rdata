<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Optimize an Object for Storage as Plain Text and Add Metadata — meta • git2rdata</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Optimize an Object for Storage as Plain Text and Add Metadata — meta" />
<meta property="og:description" content="Prepares a vector for storage. When relevant, meta() optimizes the object
for storage by changing the format to one which needs less characters. The
metadata stored in the meta attribute, contains all required information to
back-transform the optimized format into the original format.
In case of a data.frame, meta() applies itself to each of the columns. The
meta attribute becomes a named list containing the metadata for each column
plus an additional ..generic element. ..generic is a reserved name for
the metadata and not allowed as column name in a data.frame.
write_vc uses this function to prepare a dataframe for storage.
Existing metadata is passed through the optional old argument. This
argument intended for internal use." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">git2rdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../news/index.html">NEWS</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/plain_text.html">Getting started storing dataframes as plain text</a>
    </li>
    <li>
      <a href="../articles/version_control.html">Storing dataframes under version control</a>
    </li>
    <li>
      <a href="../articles/workflow.html">Potential workflow</a>
    </li>
    <li>
      <a href="../articles/efficiency.html">Efficiency</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../CONTRIBUTING.html">Contributing</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/git2rdata">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/INBOVlaanderen">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.facebook.com/pg/INBOVlaanderen">
    <span class="fa fa-facebook fg-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Optimize an Object for Storage as Plain Text and Add Metadata</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/git2rdata/blob/master/R/meta.R'><code>R/meta.R</code></a></small>
    <div class="hidden name"><code>meta.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Prepares a vector for storage. When relevant, <code>meta()</code> optimizes the object
for storage by changing the format to one which needs less characters. The
metadata stored in the <code>meta</code> attribute, contains all required information to
back-transform the optimized format into the original format.</p>
<p>In case of a data.frame, <code>meta()</code> applies itself to each of the columns. The
<code>meta</code> attribute becomes a named list containing the metadata for each column
plus an additional <code>..generic</code> element. <code>..generic</code> is a reserved name for
the metadata and not allowed as column name in a <code>data.frame</code>.</p>
<p><code><a href='write_vc.html'>write_vc</a></code> uses this function to prepare a dataframe for storage.
Existing metadata is passed through the optional <code>old</code> argument. This
argument intended for internal use.</p>
    </div>

    <pre class="usage"><span class='fu'>meta</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for character</span>
<span class='fu'>meta</span>(<span class='no'>x</span>, <span class='kw'>na</span> <span class='kw'>=</span> <span class='st'>"NA"</span>, <span class='no'>...</span>)

<span class='co'># S3 method for factor</span>
<span class='fu'>meta</span>(<span class='no'>x</span>, <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>na</span> <span class='kw'>=</span> <span class='st'>"NA"</span>, <span class='no'>index</span>, <span class='kw'>strict</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for logical</span>
<span class='fu'>meta</span>(<span class='no'>x</span>, <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for POSIXct</span>
<span class='fu'>meta</span>(<span class='no'>x</span>, <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Date</span>
<span class='fu'>meta</span>(<span class='no'>x</span>, <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>meta</span>(<span class='no'>x</span>, <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>na</span> <span class='kw'>=</span> <span class='st'>"NA"</span>, <span class='no'>sorting</span>, <span class='kw'>strict</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>the vector.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments to the methods.</p></td>
    </tr>
    <tr>
      <th>na</th>
      <td><p>the string to use for missing values in the data.</p></td>
    </tr>
    <tr>
      <th>optimize</th>
      <td><p>If <code>TRUE</code>, recode the data to get smaller text files.
If <code>FALSE</code>, <code>meta()</code> converts the data to character.
Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>index</th>
      <td><p>An optional named vector with existing factor indices.
The names must match the existing factor levels.
Unmatched levels from <code>x</code> will get new indices.</p></td>
    </tr>
    <tr>
      <th>strict</th>
      <td><p>What to do when the metadata changes. <code>strict = FALSE</code>
overwrites the data and the metadata with a warning listing the changes,
<code>strict = TRUE</code> returns an error and leaves the data and metadata as is.
Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>sorting</th>
      <td><p>an optional vector of column names defining which columns to
use for sorting <code>x</code> and in what order to use them. Omitting <code>sorting</code> yields
a warning. Add <code>sorting</code> to avoid this warning. Strongly recommended
in combination with version control. See
<code><a href='../articles/efficiency.html'>vignette("efficiency", package = "git2rdata")</a></code> for an illustration of the
importance of sorting.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>the optimized vector <code>x</code> with <code>meta</code> attribute.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The default order of factor levels depends on the current locale.
See <code><a href='https://rdrr.io/r/base/Comparison.html'>Comparison</a></code> for more details on that.
The same code on a different locale might result in a different sorting.
<code>meta()</code> ignores, with a warning, any change in the order of factor levels.
Add <code>strict = FALSE</code> to enforce the new order of factor levels.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other internal: 
<code><a href='is_git2rdata.html'>is_git2rdata</a>()</code>,
<code><a href='is_git2rmeta.html'>is_git2rmeta</a>()</code>,
<code><a href='upgrade_data.html'>upgrade_data</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>, <span class='st'>"'NA'"</span>, <span class='st'>'"NA"'</span>, <span class='st'>"abc\tdef"</span>, <span class='st'>"abc\ndef"</span>))</div><div class='output co'>#&gt; [1] "NA"             "'NA'"           "\"\"\"NA\"\"\"" "\"abc\tdef\""  
#&gt; [5] "\"abc\ndef\""  
#&gt; attr(,"meta")
#&gt; class: character
#&gt; na_string: NA
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fl'>1</span>:<span class='fl'>3</span>)</div><div class='output co'>#&gt; [1] 1 2 3
#&gt; attr(,"meta")
#&gt; class: integer
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span>(<span class='fl'>1</span>, <span class='fl'>3</span>, <span class='kw'>length</span> <span class='kw'>=</span> <span class='fl'>4</span>))</div><div class='output co'>#&gt; [1] 1.000000 1.666667 2.333333 3.000000
#&gt; attr(,"meta")
#&gt; class: numeric
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>, <span class='fl'>NA</span>, <span class='st'>"NA"</span>), <span class='kw'>levels</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"NA"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>)))</div><div class='output co'>#&gt;    b &lt;NA&gt;   NA 
#&gt;    2   NA    1 
#&gt; attr(,"meta")
#&gt; class: factor
#&gt; na_string: NA
#&gt; optimize: yes
#&gt; labels:
#&gt; - NA
#&gt; - b
#&gt; - c
#&gt; index:
#&gt; - 1
#&gt; - 2
#&gt; - 3
#&gt; ordered: no
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>, <span class='fl'>NA</span>, <span class='st'>"a"</span>), <span class='kw'>levels</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>)), <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] "b"  "NA" "a" 
#&gt; attr(,"meta")
#&gt; class: factor
#&gt; na_string: NA
#&gt; optimize: no
#&gt; labels:
#&gt; - a
#&gt; - b
#&gt; - c
#&gt; index:
#&gt; - 1
#&gt; - 2
#&gt; - 3
#&gt; ordered: no
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>, <span class='fl'>NA</span>, <span class='st'>"a"</span>), <span class='kw'>levels</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>), <span class='kw'>ordered</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt;    b &lt;NA&gt;    a 
#&gt;    2   NA    1 
#&gt; attr(,"meta")
#&gt; class: factor
#&gt; na_string: NA
#&gt; optimize: yes
#&gt; labels:
#&gt; - a
#&gt; - b
#&gt; - c
#&gt; index:
#&gt; - 1
#&gt; - 2
#&gt; - 3
#&gt; ordered: yes
#&gt; </div><div class='input'><span class='fu'>meta</span>(
  <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>, <span class='fl'>NA</span>, <span class='st'>"a"</span>), <span class='kw'>levels</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>), <span class='kw'>ordered</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>),
  <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</div><div class='output co'>#&gt; [1] "b"  "NA" "a" 
#&gt; attr(,"meta")
#&gt; class: factor
#&gt; na_string: NA
#&gt; optimize: no
#&gt; labels:
#&gt; - a
#&gt; - b
#&gt; - c
#&gt; index:
#&gt; - 1
#&gt; - 2
#&gt; - 3
#&gt; ordered: yes
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>FALSE</span>, <span class='fl'>NA</span>, <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt; [1]  0 NA  1
#&gt; attr(,"meta")
#&gt; class: logical
#&gt; optimize: yes
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>FALSE</span>, <span class='fl'>NA</span>, <span class='fl'>TRUE</span>), <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] FALSE    NA  TRUE
#&gt; attr(,"meta")
#&gt; class: logical
#&gt; optimize: no
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/complex.html'>complex</a></span>(<span class='kw'>real</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>NA</span>, <span class='fl'>2</span>), <span class='kw'>imaginary</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>NA</span>, -<span class='fl'>1</span>)))</div><div class='output co'>#&gt; [1] 1+3i   NA 2-1i
#&gt; attr(,"meta")
#&gt; class: complex
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></span>(<span class='st'>"2019-02-01 10:59:59"</span>, <span class='kw'>tz</span> <span class='kw'>=</span> <span class='st'>"CET"</span>))</div><div class='output co'>#&gt; [1] 1549015199
#&gt; attr(,"tzone")
#&gt; [1] "CET"
#&gt; attr(,"meta")
#&gt; class: POSIXct
#&gt; optimize: yes
#&gt; origin: 1970-01-01 00:00:00
#&gt; timezone: UTC
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></span>(<span class='st'>"2019-02-01 10:59:59"</span>, <span class='kw'>tz</span> <span class='kw'>=</span> <span class='st'>"CET"</span>), <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] "2019-02-01T09:59:59Z"
#&gt; attr(,"meta")
#&gt; class: POSIXct
#&gt; optimize: no
#&gt; format: '%Y-%m-%dT%H:%M:%SZ'
#&gt; timezone: UTC
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>"2019-02-01"</span>))</div><div class='output co'>#&gt; [1] 17928
#&gt; attr(,"meta")
#&gt; class: Date
#&gt; optimize: yes
#&gt; origin: '1970-01-01'
#&gt; </div><div class='input'><span class='fu'>meta</span>(<span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>"2019-02-01"</span>), <span class='kw'>optimize</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] "2019-02-01"
#&gt; attr(,"meta")
#&gt; class: Date
#&gt; optimize: no
#&gt; format: '%Y-%m-%d'
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.muscardinus.be'>Thierry Onkelinx</a>, <a href='https://www.inbo.be/en'><img src='https://ropensci.github.io/git2rdata/reference/figures/logo-en.png' height=24></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


